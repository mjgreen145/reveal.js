<html><head></head><body><div hidden=""><dom-module id="nap-add-to-bag-button"><style> #buttonel { text-align: center; margin-top: 25px; } #buttonel:focus { outline-style: none; } loading-spinner { display: none; height: 100%; } #buttonlabel { white-space: nowrap; } .loading #buttonlabel { display: none; } .loading loading-spinner { display: inline-block; }	</style><template><button id="buttonel" class="add-to-bag-button " on-click="_addToBag"><span id="buttonlabel">{{_translate(copy, "addToBag")}}</span><loading-spinner id="buttonspinner"></loading-spinner></button></template><script>Polymer({is:"nap-add-to-bag-button",properties:{working:{type:Boolean,value:false},skus:{type:Array,value:[]},copy:{type:Object,value:{en:{addToBag:"Add to bag"},fr:{addToBag:"Ajouter au panier"},de:{addToBag:"In den Warenkorb"},zh:{addToBag:"加入购物袋"}}},buttontype:{type:String,value:"secondary-button-medium"}},ready:function(){this.$.buttonel.classList.add(this.buttontype)},_addToBag:function(){if(this.working){return}if(this.skus){this.working=true;var that=this;this._fixButtonSize();this.$.buttonel.classList.add("loading");NAP.apiTools.addSkusToBasket(this.skus,function(data){that.$.buttonel.classList.remove("loading");that.working=false;if(data.results&&data.results.length>0&&data.results[0].result==="PRODUCT_ADDED"){var itemPid=data.results[0].sku.split("-");var addEvent=document.createEvent("CustomEvent");addEvent.initCustomEvent("addToBagSuccess",false,false,{pid:itemPid[0]});window.dispatchEvent(addEvent);NAP.headerOverlay.displayProductAlertOverlay("shopping-basket-notify",that.skus.length)}})}},_fixButtonSize:function(){var buttonWidth=this.$.buttonel.offsetWidth;var buttonHeight=this.$.buttonel.offsetHeight;this.$.buttonel.style.height=buttonHeight+"px";this.$.buttonel.style.width=buttonWidth+"px"},_translate:function(copy,key){return copy[NAP.locale.language][key]}});</script></dom-module><dom-module id="nap-shoppable-upsell"><style> :host { overflow:hidden; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; } :host.row { margin-right: 10px; margin-left: 10px; } :host .row, :host .swiper-wrapper { margin: 0 auto; } nap-product { margin-bottom: 25px; } nap-product:nth-child(n+7) { display: none; } .swiper-prev, .swiper-next { display: none; } @media (min-width: 951px) { .row { -webkit-flex-wrap: inherit; -ms-flex-wrap: inherit; flex-wrap: inherit; } .swiper-prev, .swiper-next { display: block; position: absolute; z-index: 2; top: calc(50% - 90px); cursor: pointer; } .swiper-next { right: 0; } nap-product:nth-child(n+7) { display: flex; } } </style><template><template is="dom-if" if="{{_carouselNeeded(carousel, items)}}"><div id="upsell-carousel" class="swiper-container"><div class="icon icon-arrow_left swiper-prev"></div><div class="swiper-wrapper row"><template is="dom-repeat" items$="{{items}}"><nap-product class="col-xs-6 col-sm-4 col-lg-2 swiper-slide" product="{{item}}" itemprop$="{{schemaproperty}}"></nap-product></template></div><div class="icon icon-arrow_right swiper-next"></div></div></template><template is="dom-if" if="{{!_carouselNeeded(carousel, items)}}"><template is="dom-repeat" items="{{items}}"><nap-product class="col-xs-6 col-sm-4 col-lg-2" product="{{item}}" itemprop$="{{schemaproperty}}" itemscope="" itemtype="http://schema.org/Product"></nap-product></template></template></template><script>Polymer({is:"nap-shoppable-upsell",properties:{items:{type:Array,value:[]},limit:{type:Number,value:6},carousel:{type:Boolean,value:false},carouselInstance:Object,schemaproperty:String},_carouselNeeded:function(carousel,items){return this.carousel&&items.length>6},_initCarousel:function(){var that=this;if(window.innerWidth>=951){if(typeof Swiper==="undefined"){return setTimeout(function(){that._initCarousel()},100)}if(!this.carouselInstance){this.carouselInstance=new Swiper(this.$$("#upsell-carousel"),{loop:true,nextButton:this.$$(".swiper-next"),prevButton:this.$$(".swiper-prev"),slidesPerView:6,simulateTouch:false});var dupes=this.querySelectorAll("nap-product.swiper-slide-duplicate");[].forEach.call(dupes,function(dupedProduct){var index=dupedProduct.getAttribute("data-swiper-slide-index");var realProduct=that.querySelector('nap-product[data-swiper-slide-index="'+index+'"]:not(.swiper-slide-duplicate)');dupedProduct.product=realProduct.product})}}else{if(this.carouselInstance){this.carouselInstance.destroy(true,true);this.carouselInstance=null}}},attached:function(){if(this.carousel&&this.items.length>6){var orientation;var self=this;window.addEventListener("resize",function(){self._initCarousel()});window.addEventListener("deviceorientation",function(){switch(true){case NAP.device.portrait()&&orientation==="landscape":orientation="portrait";self._initCarousel();break;case NAP.device.landscape()&&orientation==="portrait":orientation="landscape";self._initCarousel();break}});self._initCarousel()}}});</script></dom-module></div></body></html>