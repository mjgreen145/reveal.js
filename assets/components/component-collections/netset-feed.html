<html><head></head><body><div hidden=""><dom-module id="netset-feed"><style> #netset-feed{ text-align: center; max-width:950px; width:950px; margin:0 auto; } #netset-feed .heading { display: block; margin: -15px auto 10px; max-width: 100%; } #netset-feed .sell{ font-family: Avenir; margin: 15px 0 25px; font-size: 17px; } #netset-feed { overflow: hidden; height:500px; } .link-container { padding-top: 10px; } .share-shop { font-family: millertext; font-style: italic; font-size: 21px; } .join-us { font-weight: 600; text-transform: uppercase; font-size: 19px; } .join-us-container { margin-top: 17px; padding-bottom:5px; border-bottom: 5px solid #FF0C25; display: inline-block; font-family: Avenir; } </style><template><div id="netset-feed"><a href="{{netset_url}}"><div class="sell">{{copy.what_netset_doing}}</div><img class="heading" src="https://d2qwc1zwgrvy3z.cloudfront.net/assets/homepage/TNS-Wordmark-Feed.svg" width="220px" height="41px"></a><netset-feed-products></netset-feed-products><a href="{{netset_url}}"><div class="share-shop">{{copy.share_shop}}</div><div class="join-us-container"><div class="join-us">{{copy.join_us}}</div></div></a></div></template><script>Polymer({is:"netset-feed",properties:{copy:{type:Object,value:{join_us:"Join Now",what_netset_doing:"See what people are loving right now on",share_shop:"Share & shop with the worldâ€™s most stylish women"}},netset_url:{type:Object,value:"https://www.thenetset.com"}}});</script></dom-module><dom-module id="netset-feed-products"><style> .netset-feed-product{ margin-bottom:40px; position: relative; display: none; float:left; padding:0 10px; } .netsetfeed-products{ position:relative; width: 2000px !important; overflow: hidden; height: 325px; padding-bottom: 15px; } netset-product ::shadow{ margin-bottom: 0; position: relative; text-align: center; } netset-product ::shadow .designer { overflow: hidden; text-overflow: ellipsis; display: -webkit-box; line-height: 18px; height: 52px; -webkit-line-clamp: 2; -webkit-box-orient: vertical; font-size: 19px; } .netsetfeed-products .visible{ display: block; width:141px; } </style><template><iron-ajax id="getProduct" auto="" url="{{feedAPI}}" params="{{_generateParams(size)}}" handle-as="json" last-response="{{netsetFeedApiResponse}}" last-error="{{netsetFeedApiError}}" on-response="_onResponse" on-error="_onError"></iron-ajax><div class="netsetfeed-products" on-mouseenter="_pauseAnimation" on-mouseleave="_resumeAnimation"><template is="dom-repeat" items="{{uniqueProductsArr}}"><div class="netset-feed-product visible"><netset-product product$="{{item}}"></netset-product></div></template></div></template><script>var errorTimerMultipler=1;var errorRefreshTimerMaximum=6e4;var refreshProductsTimer=3e3;var firstVisibleIndex=0;var lastVisibleIndex=5;var positionLeft=0;var init=true;var timeOutAnimation;var moveDistance=158;var animationPaused=false;Polymer({is:"netset-feed-products",properties:{size:{type:Number,value:80},uniqueProductsArr:{type:Array,value:[]},feedAPI:{type:Object,value:"https://api.thenetset.com/api/public/discover/products"}},_pauseAnimation:function(){this.cancelAsync(timeOutAnimation);animationPaused=true},_resumeAnimation:function(){timeOutAnimation=this.async(this._slideLeft,refreshProductsTimer);animationPaused=false},_slideLeft:function(){var allProducts=document.querySelectorAll(".netset-feed-product");var container=document.querySelector(".netsetfeed-products");if(allProducts.length>lastVisibleIndex+1&&typeof allProducts[firstVisibleIndex]!=="undefined"){var singleMove=singleMove||moveDistance/40;var playAnimation=setInterval(function(){positionLeft=positionLeft-singleMove;container.style.left=positionLeft+"px";if(positionLeft<=-moveDistance){clearInterval(playAnimation);allProducts[firstVisibleIndex].classList.remove("visible");positionLeft=0;container.style.left=positionLeft;firstVisibleIndex++;lastVisibleIndex++}},10)}},_callAPI:function(){this.$.getProduct.generateRequest();errorTimerMultipler=1},_generateParams:function(size){return{country:NAP.locale.country.toUpperCase(),limit:size}},_onResponse:function(){if(this.netsetFeedApiResponse&&this.netsetFeedApiResponse.data){this._updateProducts(this.netsetFeedApiResponse);this.async(this._callAPI,refreshProductsTimer);if(!animationPaused){timeOutAnimation=this.async(this._slideLeft,refreshProductsTimer)}}else{this._onError()}},_onError:function(){var errorTimerMultiplied=refreshProductsTimer*errorTimerMultipler;var errorThrown;this.async(function(){this.$.getProduct.generateRequest()},errorTimerMultiplied);if(errorTimerMultiplied<errorRefreshTimerMaximum){errorTimerMultipler=errorTimerMultipler*2}if(this.netsetFeedApiError){errorThrown=this.productActivityApiError.error.message}else{errorThrown="product response empty"}},_updateProducts:function(productActivityArr){var normalisedProductDataArr=this._normaliseProductData(productActivityArr);this._updateProductBuffer(normalisedProductDataArr)},_normaliseProductData:function(productActivityArr){var normalisedProductDataArr=[];productActivityArr.data.forEach(function(productObj){normalisedProductDataArr.push({id:productObj.target.productID,brand:{name:productObj.target.designerName},activity:{hash:productObj.target.productID,activityCreated:productObj.createdAt,type:productObj["@type"],countOfLoves:productObj.target.countOfLoves,inStock:productObj.target.inStock},locale:productObj.location})});return normalisedProductDataArr},_updateProductBuffer:function(normalisedProductDataArr){var that=this;normalisedProductDataArr.forEach(function(normalisedProductObj){that._checkIfHashHasBeenUsedBefore(normalisedProductObj)})},_checkIfHashHasBeenUsedBefore:function(normalisedProductObj){var uniqueProductsArr=this.uniqueProductsArr;if(uniqueProductsArr.length>0){var hashAlreadyExists=false;uniqueProductsArr.forEach(function(uniqueProductObj){if(uniqueProductObj.activity.hash===normalisedProductObj.activity.hash){hashAlreadyExists=true}});if(!hashAlreadyExists&&normalisedProductObj.activity.inStock){this._addUniqueProductsToArr(normalisedProductObj)}}else{this._addUniqueProductsToArr(normalisedProductObj)}},_addUniqueProductsToArr:function(normalisedProductObj){this.push("uniqueProductsArr",normalisedProductObj)}});</script></dom-module><dom-module id="netset-product"><style> :host { display: block; box-sizing: border-box; padding: 0 10px !important; font-size: 14px; margin-bottom: 40px; text-align: left; } .image { width: 100%; } .designer { margin-top: 20px; font-family: millertext; font-style: italic; height: 57px; font-size: 19px; word-wrap: break-word; text-overflow: ellipsis; } .city { text-align: center; padding-top: 15px; font-size: 14px; font-weight: bold; font-family: Avenir; } .loveHeart { width: 22px; padding-right: 5px; vertical-align: middle; } .loves { text-align: center; font-size: 18px; font-family: Avenir; } .number { font-size: 16px; font-family: Avenir; } </style><template><a href="{{_productUrl(product.id)}}"><img id="image" class="image" src="{{_imgUrl(product.id)}}"><div class="designer">{{product.brand.name}}</div><div class="loves"><img class="loveHeart" src="https://d2qwc1zwgrvy3z.cloudfront.net/assets/homepage/heart-loved.svg" width="26px"><span class="number">{{product.activity.countOfLoves}}</span></div><template is="dom-if" if="{{product.locale.city}}"><div class="city">{{product.locale.city.name}}</div></template></a></template><script>Polymer({is:"netset-product",properties:{product:Object},_imgUrl:function(pid){return"//cache.net-a-porter.com/images/products/"+pid+"/"+pid+"_in_l.jpg"},_productUrl:function(pid){return"/"+NAP.locale.country.toLowerCase()+"/"+NAP.locale.language+"/product/"+pid}});</script></dom-module></div></body></html>