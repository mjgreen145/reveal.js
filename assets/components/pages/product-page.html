<html><head></head><body><div hidden=""><dom-module id="nap-product-upsell"><style> :host { overflow:hidden; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; } .swiper-prev, .swiper-next { display: none; } @media (min-width: 951px) { .row { -webkit-flex-wrap: inherit; -ms-flex-wrap: inherit; flex-wrap: inherit; } .swiper-prev, .swiper-next { display: block; position: absolute; z-index: 2; top: calc(50% - 90px); cursor: pointer; } .swiper-next { right: 0; } } </style><template><iron-ajax id="getSummaries" auto="" url="//api.net-a-porter.com/product/summaries/data" params="{{_generateParams(pids, limit)}}" handle-as="json" last-response="{{productSummariesApiResponse}}" last-error="{{productSummariesApiError}}" on-request="_onRequest" on-response="_onResponse" on-error="_onError"></iron-ajax><template is="dom-if" if="{{_carouselNeeded(carousel, pids)}}"><div id="upsell-carousel" class="swiper-container"><div class="icon icon-arrow_left swiper-prev"></div><div class="swiper-wrapper row"><template is="dom-repeat" items$="{{productData}}"><nap-product class="col-xs-6 col-sm-4 col-lg-2 swiper-slide" product="{{item}}" itemprop$="{{schemaproperty}}"></nap-product></template></div><div class="icon icon-arrow_right swiper-next"></div></div></template><template is="dom-if" if="{{!_carouselNeeded(carousel, pids)}}"><template is="dom-repeat" items="{{productData}}"><nap-product class="col-xs-6 col-sm-4 col-lg-2" product="{{item}}" itemprop$="{{schemaproperty}}" itemscope="" itemtype="http://schema.org/Product"></nap-product></template></template></template><script>Polymer({is:"nap-product-upsell",properties:{pids:{type:Array,value:[]},productData:Array,limit:{type:Number,value:6},carousel:{type:Boolean,value:false},carouselInstance:Object,schemaproperty:String},_onRequest:function(){NAP.monitoring.registerPerfMark(this.$.getSummaries.url)},_onResponse:function(){this.productData=this.productSummariesApiResponse;if(this.carousel&&this.pids.length>6){var self=this;var carousel=this.$$("#upsell-carousel");carousel.addEventListener("dom-change",function handler(){carousel.removeEventListener("dom-change",handler);self._initCarousel()})}NAP.monitoring.measurePerfMark("Polymer",this.$.getSummaries.url,{status:"success"})},_onError:function(){NAP.monitoring.registerPerfMetricAndMonitoring("Polymer","API Failure",this.$.getSummaries.url,{status:"error",errorThrown:this.productSummariesApiError.error.message})},_generateParams:function(pids,limit){var uniquePids=pids.filter(function(item,pos,self){return self.indexOf(item)===pos});return{business:"NAP",country:NAP.locale.country,lang:NAP.locale.language,limit:limit,offset:0,pids:uniquePids,sort:"input"}},_carouselNeeded:function(carousel,pids){return this.carousel&&this.pids.length>6},_initCarousel:function(){if(window.innerWidth>=951){if(!this.carouselInstance){var self=this;this.carouselInstance=new Swiper(this.$$("#upsell-carousel"),{loop:true,nextButton:this.$$(".swiper-next"),prevButton:this.$$(".swiper-prev"),slidesPerView:6,simulateTouch:false});var dupes=this.querySelectorAll("nap-product.swiper-slide-duplicate");[].forEach.call(dupes,function(dupedProduct){var index=dupedProduct.getAttribute("data-swiper-slide-index");var realProduct=self.querySelector('nap-product[data-swiper-slide-index="'+index+'"]:not(.swiper-slide-duplicate)');dupedProduct.product=realProduct.product})}}else{if(this.carouselInstance){this.carouselInstance.destroy(true,true);this.carouselInstance=null}}},attached:function(){if(this.carousel&&this.pids.length>6){var orientation;var self=this;window.addEventListener("resize",function(){self._initCarousel()});window.addEventListener("deviceorientation",function(){switch(true){case NAP.device.portrait()&&orientation==="landscape":orientation="portrait";self._initCarousel();break;case NAP.device.landscape()&&orientation==="portrait":orientation="landscape";self._initCarousel();break}})}}});</script></dom-module><dom-module id="nap-shoppable-upsell"><style> :host { overflow:hidden; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; } :host.row { margin-right: 10px; margin-left: 10px; } :host .row, :host .swiper-wrapper { margin: 0 auto; } nap-product { margin-bottom: 25px; } nap-product:nth-child(n+7) { display: none; } .swiper-prev, .swiper-next { display: none; } @media (min-width: 951px) { .row { -webkit-flex-wrap: inherit; -ms-flex-wrap: inherit; flex-wrap: inherit; } .swiper-prev, .swiper-next { display: block; position: absolute; z-index: 2; top: calc(50% - 90px); cursor: pointer; } .swiper-next { right: 0; } nap-product:nth-child(n+7) { display: flex; } } </style><template><template is="dom-if" if="{{_carouselNeeded(carousel, items)}}"><div id="upsell-carousel" class="swiper-container"><div class="icon icon-arrow_left swiper-prev"></div><div class="swiper-wrapper row"><template is="dom-repeat" items$="{{items}}"><nap-product class="col-xs-6 col-sm-4 col-lg-2 swiper-slide" product="{{item}}" itemprop$="{{schemaproperty}}"></nap-product></template></div><div class="icon icon-arrow_right swiper-next"></div></div></template><template is="dom-if" if="{{!_carouselNeeded(carousel, items)}}"><template is="dom-repeat" items="{{items}}"><nap-product class="col-xs-6 col-sm-4 col-lg-2" product="{{item}}" itemprop$="{{schemaproperty}}" itemscope="" itemtype="http://schema.org/Product"></nap-product></template></template></template><script>Polymer({is:"nap-shoppable-upsell",properties:{items:{type:Array,value:[]},limit:{type:Number,value:6},carousel:{type:Boolean,value:false},carouselInstance:Object,schemaproperty:String},_carouselNeeded:function(carousel,items){return this.carousel&&items.length>6},_initCarousel:function(){var that=this;if(window.innerWidth>=951){if(typeof Swiper==="undefined"){return setTimeout(function(){that._initCarousel()},100)}if(!this.carouselInstance){this.carouselInstance=new Swiper(this.$$("#upsell-carousel"),{loop:true,nextButton:this.$$(".swiper-next"),prevButton:this.$$(".swiper-prev"),slidesPerView:6,simulateTouch:false});var dupes=this.querySelectorAll("nap-product.swiper-slide-duplicate");[].forEach.call(dupes,function(dupedProduct){var index=dupedProduct.getAttribute("data-swiper-slide-index");var realProduct=that.querySelector('nap-product[data-swiper-slide-index="'+index+'"]:not(.swiper-slide-duplicate)');dupedProduct.product=realProduct.product})}}else{if(this.carouselInstance){this.carouselInstance.destroy(true,true);this.carouselInstance=null}}},attached:function(){if(this.carousel&&this.items.length>6){var orientation;var self=this;window.addEventListener("resize",function(){self._initCarousel()});window.addEventListener("deviceorientation",function(){switch(true){case NAP.device.portrait()&&orientation==="landscape":orientation="portrait";self._initCarousel();break;case NAP.device.landscape()&&orientation==="portrait":orientation="landscape";self._initCarousel();break}});self._initCarousel()}}});</script></dom-module><dom-module id="nap-ymal-module"><style> :host { display: none; } .heading { text-transform: uppercase; } nap-product-upsell { margin: 0 10px; } @media all and (min-width: 481px) { nap-product-upsell { width: 82%; margin: 0 auto; } } @media all and (min-width: 951px) { nap-product-upsell { width: 100%; max-width: 1080px; } } </style><template><iron-ajax id="getYmal" auto="" url="{{_ymalUrl(pid)}}" handle-as="json" last-response="{{ymalApiResponse}}" last-error="{{ymalApiError}}" on-request="_onRequest" on-response="_onResponse" on-error="_onError"></iron-ajax><widget-show-hide class="open-lg" name="You May Also Like" open="{{open}}"><div class="show-hide-title heading">{{heading}}</div><div class="show-hide-content"><template is="dom-if" if="{{_pidsExist(ymalApiResponse)}}"><nap-product-upsell id="upsell" class="row center-lg" pids="{{ymalApiResponse.ymalPids}}" limit="{{limit}}" schemaproperty="isSimilarTo"></nap-product-upsell><content select=".view-more"></content></template></div></widget-show-hide></template><script>Polymer({is:"nap-ymal-module",properties:{pid:String,heading:String,limit:Number,open:{type:Boolean,value:false},channelIds:{type:Object,value:{intl:1,am:2,apac:9}}},_onRequest:function(){NAP.monitoring.registerPerfMark(this.$.getYmal.url)},_onResponse:function(){if(this._pidsExist(this.ymalApiResponse)){this.style.display="block"}NAP.monitoring.measurePerfMark("Polymer",this.$.getYmal.url,{status:"success"})},_onError:function(){NAP.monitoring.registerPerfMetricAndMonitoring("Polymer","API Failure",this.$.getYmal.url,{status:"error",errorThrown:this.ymalApiError.error.message})},_ymalUrl:function(pid){return"/api/styling/products/"+pid+"/"+this.channelIds[NAP.locale.channel]+"/ymal.json"},_pidsExist:function(data){return data&&data.ymalPids.length>0},getName:function(){return"You May Also Like"},ready:function(){NAP.webAnalytics.api.addPageFeature("ymal")}});</script></dom-module><dom-module id="nap-htwi-module"><style> :host { display: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; } .heading { text-transform: uppercase; } nap-product-upsell { margin: 0 10px; } nap-product-upsell.multiple-outfits { visibility: hidden; height: 0px; } nap-product-upsell.visible { visibility: visible; height: auto; } .outfit-images { padding-bottom: 40px; max-width: 1080px; } .outfit-swiper-prev, .outfit-swiper-next { display: block; position: absolute; z-index: 2; top: calc(50% - 45px); cursor: pointer; } .outfit-swiper-next { right: 0; } .outfit-image-wrapper { width: 45%; font-size: 0; display: inline-block; position: relative; } .outfit-image { width: 100%; } .outfit-image-wrapper .arrow { display: none; } .outfit-image-wrapper.selected { border-width: 0 0 4px 0; border-style: solid; border-color: transparent transparent #000 transparent; padding-bottom: 10px; } .outfit-image-wrapper.selected .arrow { display: block; top: 100%; left: 50%; border: solid transparent; content: " "; height: 0; width: 0; position: absolute; pointer-events: none; border-color: rgba(0, 0, 0, 0); border-top-color: #000; border-width: 13px; margin-left: -13px; } @media all and (min-width: 481px) { nap-product-upsell { width: 82%; margin: 0 auto; } } @media all and (min-width: 951px) { nap-product-upsell { width: 100%; max-width: 1080px; } .swiper-wrapper { display: inline-block; text-align: center; font-size: 0; } .outfit-image-wrapper { width: calc(25% - 4px); margin: 0 2px; cursor: pointer; } .outfit-swiper-prev, .outfit-swiper-next { display: none; } } </style><template><iron-ajax id="getHtwi" auto="" url="{{_htwiUrl(pid)}}" handle-as="json" last-response="{{htwiApiResponse}}" last-error="{{htwiApiError}}" on-request="_onRequest" on-response="_onResponse" on-error="_onError"></iron-ajax><widget-show-hide class="open-lg" name="How To Wear It"><div class="show-hide-title heading">{{heading}}</div><div class="show-hide-content"><template is="dom-if" if="{{_multipleOutfits(htwiApiResponse.outfits)}}"><div class="outfit-images swiper-container" id="outfit-carousel"><div class="icon-carousel_arrow-left outfit-swiper-prev"></div><div class="swiper-wrapper outfit-wrapper"><template is="dom-repeat" items="{{outfits}}"><div class="swiper-slide outfit-image-wrapper" data-index$="{{index}}" on-click="_handleOutfitClick"><img src="{{_outfitImageUrl(item.photoPid, item.photoView)}}" class="outfit-image"><div class="arrow"></div></div></template></div><div class="icon-carousel_arrow-right outfit-swiper-next"></div></div><template is="dom-repeat" items="{{outfits}}"><nap-product-upsell class="row center-lg multiple-outfits" pids="{{_getOutfitPids(item)}}" limit="{{item.products.length}}" carousel="" data-index$="{{index}}" schemaproperty="isRelatedTo"></nap-product-upsell></template></template><template is="dom-if" if="{{_oneOutfit(htwiApiResponse.outfits)}}"><nap-product-upsell id="upsell" class="row center-lg" pids="{{_getOutfitPids(htwiApiResponse.outfits.0)}}" limit="{{htwiApiResponse.outfits.0.products.length}}" carousel="" schemaproperty="isRelatedTo"></nap-product-upsell></template></div></widget-show-hide></template><script>Polymer({is:"nap-htwi-module",properties:{pid:String,heading:String,outfits:Array,channelIds:{type:Object,value:{intl:1,am:2,apac:9}},carouselInstance:Object},_onRequest:function(){NAP.monitoring.registerPerfMark(this.$.getHtwi.url)},_onResponse:function(){if(this._outfitsExist(this.htwiApiResponse.outfits)){if(this._multipleOutfits(this.htwiApiResponse.outfits)){var self=this;this.addEventListener("dom-change",function handler(){var upsell=self.querySelector('nap-product-upsell[data-index="0"]');var firstOutfit=self.querySelector(".outfit-image-wrapper");if(upsell&&firstOutfit){upsell.classList.add("visible");firstOutfit.classList.add("selected");if(self.carouselInstance||window.innerWidth>=951){self.removeEventListener("dom-change",handler)}self._initCarousel()}})}this.outfits=this._trimOutfits(this.htwiApiResponse.outfits);this.style.display="block"}NAP.monitoring.measurePerfMark("Polymer",this.$.getHtwi.url,{status:"success"})},_onError:function(){NAP.monitoring.registerPerfMetricAndMonitoring("Polymer","API Failure",this.$.getHtwi.url,{status:"error",errorThrown:this.htwiApiError.error.message})},_trimOutfits:function(outfits){if(outfits.length>4){return outfits.splice(0,4)}return outfits},_htwiUrl:function(pid){return"/api/styling/products/"+pid+"/"+this.channelIds[NAP.locale.channel]+"/outfits.json"},_outfitImageUrl:function(pid,shot){return"//cache.net-a-porter.com/images/products/"+pid+"/"+pid+"_"+shot+"_pp.jpg"},_getOutfitPids:function(outfit){var validProducts=outfit.products.filter(function(product){return product.slotQueue.length>0});return validProducts.map(function(product){return product.slotQueue[0]})},_outfitsExist:function(outfits){return outfits.length>0},_multipleOutfits:function(outfits){return outfits.length>1},_oneOutfit:function(outfits){return outfits.length===1},_carouselNeeded:function(outfit){return outfit.products.length>6},_updateOutfitAndUpsells:function(newOutfit){var napProductUpsells=this.querySelectorAll("nap-product-upsell");[].forEach.call(napProductUpsells,function(upsell){upsell.classList.remove("visible")});var outfitImages=this.querySelectorAll(".outfit-image-wrapper");[].forEach.call(outfitImages,function(outfit){outfit.classList.remove("selected")});newOutfit.classList.add("selected");var index=newOutfit.getAttribute("data-index");var newUpsell=this.querySelector('nap-product-upsell[data-index="'+index+'"]');if(newUpsell){newUpsell.classList.add("visible")}},_handleOutfitClick:function(event){if(window.innerWidth>=951){this._updateOutfitAndUpsells(event.target.parentNode)}},_initCarousel:function(){if(window.innerWidth<951){if(!this.carouselInstance){if(this.$$("#outfit-carousel")){var self=this;var carousel=new Swiper(this.$$("#outfit-carousel"),{loop:true,nextButton:".outfit-swiper-next",prevButton:".outfit-swiper-prev",slidesPerView:"auto",loopedSlides:this.outfits.length,centeredSlides:true,spaceBetween:4,simulateTouch:false,onSlideChangeStart:function(swiper){var newOutfit=self.querySelector(".outfit-image-wrapper.swiper-slide-active");self._updateOutfitAndUpsells(newOutfit)}});if(carousel.slides.length>0){this.carouselInstance=carousel}}}}else{if(this.carouselInstance){this.carouselInstance.destroy(true,true);this.carouselInstance=null}}},getName:function(){return"How To Wear It"},getOutfitIndex:function(){var activeOutfit=this.querySelector(".outfit-image-wrapper.selected");if(activeOutfit){return activeOutfit.getAttribute("data-index")}else{return"0"}},attached:function(){var orientation;var self=this;window.addEventListener("resize",function(){self._initCarousel()});window.addEventListener("deviceorientation",function(){switch(true){case NAP.device.portrait()&&orientation==="landscape":orientation="portrait";self._initCarousel();break;case NAP.device.landscape()&&orientation==="portrait":orientation="landscape";self._initCarousel();break}});NAP.webAnalytics.api.addPageFeature("htwi")}});</script></dom-module><dom-module id="nap-product-swatch"><style> .product-swatch { display:inline-block; border: 1px solid #FFF; } .current { border-color: #979797 } a { display:block; position:relative; overflow: hidden; margin: 4px; width:36px; height:36px; } img.old { position:absolute; top: -54px; left: -54px; } </style><template><div class$="{{_getContainerClass(product.current)}}"><a href="{{_productUrl(product.id)}}"><img id="swatch-image" width="36" height="36" src="{{_imgUrl(product.id)}}" alt=""></a></div></template><script>Polymer({is:"nap-product-swatch",properties:{product:Object},_getContainerClass:function(currentProduct){if(currentProduct){return"product-swatch current"}else{return"product-swatch"}},_productUrl:function(pid){return"/"+NAP.locale.country.toLowerCase()+"/"+NAP.locale.language+"/product/"+pid},_imgUrl:function(pid){return"//cache.net-a-porter.com/images/products/"+pid+"/"+pid+"_sw.jpg"},ready:function(){this.$["swatch-image"].addEventListener("load",function(){if(this.naturalWidth!==72){this.classList.add("old");this.width=134;this.height=134}})}});</script></dom-module><dom-module id="nap-product-swatch-collector"><style> :host { display: block; min-height: 47px; }; </style><template><iron-ajax id="getSummaries" auto="" url="//api.net-a-porter.com/product/summaries/data" params="{{_generateParams(pids)}}" handle-as="json" last-response="{{productSummariesApiResponse}}" last-error="{{productSummariesApiError}}" on-request="_onRequest" on-response="_onResponse" on-error="_onError"></iron-ajax><template is="dom-if" if="{{availableSwatches}}"><template is="dom-repeat" items="{{availableSwatches}}"><nap-product-swatch product="{{item}}"></nap-product-swatch></template></template></template><script>Polymer({is:"nap-product-swatch-collector",properties:{current:String,pids:Array,availableSwatches:Array},_onRequest:function(){NAP.monitoring.registerPerfMark(this.$.getSummaries.url)},_onResponse:function(){this._getPidsOfVisiableProducts(this.current,this.productSummariesApiResponse);NAP.monitoring.measurePerfMark("Polymer",this.$.getSummaries.url,{status:"success"})},_onError:function(){NAP.monitoring.registerPerfMetricAndMonitoring("Polymer","API Failure",this.$.getSummaries.url,{status:"error",errorThrown:this.productSummariesApiError.error.message})},_getPidsOfVisiableProducts:function(current,summeryData){var availableSwatches=[];summeryData.forEach(function(pid){if(pid.visible){availableSwatches.push({id:pid.id,current:false})}});if(availableSwatches.length>0){availableSwatches.unshift({id:Number(current),current:true})}else{this.style.display="none"}this.availableSwatches=availableSwatches},_generateParams:function(pids){return{business:"NAP",country:NAP.locale.country,lang:NAP.locale.language,pids:pids}}});</script></dom-module><dom-module id="nap-wishlist-button"><style> :host { display: block; position: relative; }; .wishlist-button { box-sizing: border-box; text-transform: uppercase; } .wishlist-button span, loading-spinner{ transition: opacity 0.3s ease-out; } loading-spinner, .successful-text { opacity: 0; position: absolute; margin: 0 auto; right: 0; left: 0; } loading-spinner { z-index: -1; } .wishlist-dropdown { max-height: 0; overflow: hidden; width: 100%; box-sizing: border-box; transition: max-height 0.3s ease-in; background-color: #FFF; } .wishlists { padding-top: 10px; overflow: auto; } .wishlist { position: relative; padding: 10px 0 10px 20px; } .wishlist:hover { background-color: #EEE; cursor: pointer; } .wishlist .icon { position: absolute; right: 8px; top: 7px; } .icon-arrow_down-active { position: absolute; right: 10px; top: 17px; } .icon-arrow_down-active:hover { cursor: pointer; } .icon-arrow_down-active:hover ~ .wishlist-button { background-color: #EEE; } .icon-arrow_down-active:active ~ .wishlist-button { background-color: #EEE; box-shadow: inset 0px 0px 8px 0px #999999; } .create-new .text{ padding: 15px 20px; } .create-new .link{ color: #999; border-bottom: 1px solid #999; cursor: pointer; } .create-new .form { display: none; padding-top: 10px; } .create-new input-text, .create-new .submit { float: left; } .create-new input-text { width: 65%; } .create-new .submit { padding: 21px 12px; width: 35%; box-sizing: border-box; border-radius: 0 0 3px 0; border-bottom: none; border-right: none; } .create-new .form input-text{ border-width: 1px 0 0 0; } :host.dropdown-open .wishlist-button { border-radius: 3px 3px 0 0; } :host.dropdown-open .wishlist-dropdown { max-height: 1550px; border: 1px solid #CCCCCC; border-top: none; border-radius: 0 0 3px 3px; } :host.loading loading-spinner { opacity: 1; z-index: 1; } :host.loading .wishlist-button .add-to-text, :host.loading .icon-arrow_down-active{ opacity: 0; } :host.success .successful-text { opacity: 1; } :host.success .wishlist-button .add-to-text, :host.success .icon-arrow_down-active{ opacity: 0; } :host.form-open .create-new .text { display: none; } :host.form-open .create-new .form { display: block; } @media (min-width: 951px) { .wishlist-dropdown { position: absolute; z-index: 1; } .wishlists { max-height: 200px; } :host.dropdown-open .wishlist-dropdown { max-height: 279px; } } @media (min-width: 1081px) { .icon-arrow_down-active ~ .wishlist-button { padding-right: 37px; } } </style><template><template is="dom-if" if="{{wishlists.length}}"><div class="icon icon-arrow_down-active" on-click="_clickButton"></div></template><div class="wishlist-button secondary-button-large-wide" on-click="_clickButton"><span class="add-to-text">{{_translate(copy, 'addToWishlist')}}</span><span class="successful-text">{{_translate(copy, 'successful')}}</span><loading-spinner></loading-spinner></div><template is="dom-if" if="{{wishlists.length}}"><div class="wishlist-dropdown"><div class="wishlists"><template is="dom-repeat" items="{{wishlists}}"><div class="wishlist" id="{{item.id}}" on-click="_clickWishlist"><template is="dom-if" if="{{!item.shared}}"><div class="icon icon-lock"></div></template><span>{{item.name}}</span></div></template></div><div class="create-new"><div class="text">{{_translate(copy, 'or')}}<span class="link" on-click="_openListForm">{{_translate(copy, 'createList')}}</span></div><div class="form"><input-text label="{{_translate(copy, 'listName')}}" type="text" error="" required=""></input-text><input type="button" on-click="_createNewList" class="primary-button-large submit" value="{{_translate(copy, 'create')}}" disabled="disabled"></div></div></div></template></template><script>Polymer({is:"nap-wishlist-button",properties:{wishlists:{type:Array,value:[]},sku:{type:Object,value:{}},copy:{type:Object,value:{en:{addToWishlist:"Add To Wish List",successful:"successfully added",or:"Or ",createList:"Create a new list",create:"Create",listName:"List name"},de:{addToWishlist:"Auf meine Wunschliste",successful:"Erfolgreich hinzugefügt",or:"Oder ",createList:"Neue Liste erstellen",create:"Erstellen",listName:"Name der Liste"},fr:{addToWishlist:"Ajouter à ma wish list",successful:"Ajouté avec succès",or:"Ou ",createList:"Créez une nouvelle liste",create:"Créer",listName:"Nom de la liste"},zh:{addToWishlist:"加入愿望清单",successful:"成功加入愿望清单",or:"或",createList:"创建新的愿望清单",create:"确定",listName:"清单名称"}}}},_clickButton:function(){if(this.wishlists.length===0){this._sendToSignIn()}else{this._toggleDropdown()}},_sendToSignIn:function(){var skuId=this.sku.id||"";window.location.href="https://"+window.location.host+"/"+NAP.locale.channel+"/signin.nap?redirect="+encodeURIComponent(window.location.pathname+"?addToWishlist="+encodeURIComponent(skuId)+"&httpsRedirect=true")},_toggleDropdown:function(){if(!this.classList.contains("success")&&!this.classList.contains("loading")){this.classList.toggle("dropdown-open")}},_clickWishlist:function(event){var target=event.target;while(!target.classList.contains("wishlist")){target=target.parentElement}this._addItem(target.id)},_addItem:function(wishlistId){var self=this;if(this.sku.id){NAP.apiTools.wishlist.addItem(wishlistId,function(data){self.classList.remove("loading");self.classList.add("success");setTimeout(function(){self.classList.remove("success")},3e3);self._sendWishlistAnalytics([{id:self.sku.id,size:self.sku.size}])},{data:{"@type":"/api/schemas/wishlist-item",skuId:this.sku.id},errorHandler:function(){if(self.onError){self.onError()}self.classList.remove("loading")}});this.classList.toggle("dropdown-open");this.classList.add("loading")}else{if(this.invalidSkuCallback){this.invalidSkuCallback()}this._sendWishlistErrorAnalytics()}},_openListForm:function(){var submitButton=this.querySelector(".submit");this.classList.add("form-open");this.querySelector("input-text").addEventListener("input",function(){if(this.isValid()){submitButton.removeAttribute("disabled")}else{submitButton.setAttribute("disabled","disabled")}})},_createNewList:function(){var self=this;var name=this.querySelector("input-text").getValue();if(this.sku.id){NAP.apiTools.wishlist.createList(function(data){self._addItem(data.id);setTimeout(function(){self.push("wishlists",data);self.classList.remove("form-open")},500)},{data:{"@type":"/api/schemas/wishlist",name:name},errorHandler:function(){if(self.onError){self.onError()}self.classList.toggle("dropdown-open");self.classList.remove("form-open")}})}else{if(this.invalidSkuCallback){this.invalidSkuCallback()}}},_translate:function(copy,key){return copy[NAP.locale.language][key]},_sendWishlistAnalytics:function(skuArray){NAP.webAnalytics.api.trackEvent("add to wishlist","update wishlist","ecommerce","product page",{pageNum:"all"},NAP.webAnalytics.getProductsWithSkuData(skuArray))},_sendWishlistErrorAnalytics:function(){NAP.webAnalytics.api.trackEvent("error - cannot add to wishlist - size not selected","user experienced error","error","product page",{errorDetails:"cannot add to wishlist - size not selected"},NAP.webAnalytics.getProducts())}});</script></dom-module><dom-module id="nap-video"><style> :host { display: inline-block; } :host #video { width: 100%; height:auto; } :host #video-container { position: relative; } :host #video-controls { position: absolute; bottom: 2px; width:100%; } :host button { position: absolute; background-color: transparent; outline:none; } :host button:hover { cursor: pointer; } :host button.play { opacity: 0; bottom: 40px; left: 0; right: 0; margin: 0 auto; transition: opacity 0.2s ease-in; transition-delay: 1s; } :host button.close { top: 8px; right: 8px; padding: 12px; } :host:hover button.play { opacity:0.8; transition-delay: 0s; } :host .seekbar { position: absolute; bottom: 0; height: 5px; background-color: #000; outline: none; transition: width 0.5s linear; } :host #seekbarFull { width: 100%; opacity: 0.2; z-index: 2; border:none; -webkit-appearance: none; -moz-appearance: none; }; :host #seekbarFull::-webkit-slider-thumb { -webkit-appearance: none; width:1px; } :host #seekbarFull::-moz-range-thumb { opacity: 0; } :host #seekbarProgress { width: 0; z-index: 1; }; :host #seekbarBuffered { width: 0; opacity: 0.3; z-index: 0; }; </style><template><div id="video-container"><video id="video" on-click="_playPause" muted$="{{muted}}"><content select="source"></content></video><template is="dom-if" if="{{close}}"><button id="close" type="button" class="close" on-click="_close"><div class="icon-cross_black" aria-label="Close"></div></button></template><div id="video-controls"><button type="button" id="playpause" class="play icon-video_play" on-click="_playPause" aria-label="Play"></button><input type="range" id="seekbarFull" class="seekbar" value="0"><div id="seekbarProgress" class="seekbar"></div><div id="seekbarBuffered" class="seekbar"></div></div></div></template><script>Polymer({is:"nap-video",properties:{close:Boolean,name:{type:String,value:"html5 video"},type:{type:String,value:"default"}},_playPause:function(event){if(this.video.paused==true){this.play()}else{this.pause()}},pause:function(){this.video.pause();this.$.playpause.setAttribute("aria-label","Play");this.$.playpause.classList.remove("icon-video_pause");this.$.playpause.classList.add("icon-video_play")},play:function(){this.video.play();this.$.playpause.setAttribute("aria-label","Pause");this.$.playpause.classList.remove("icon-video_play");this.$.playpause.classList.add("icon-video_pause")},reset:function(){video.currentTime=0},_close:function(){this.reset();this.pause();this.fire("close")},ready:function(){var self=this;var video=this.video=this.$.video;var seekBarFull=this.$.seekbarFull;var seekBarProgress=this.$.seekbarProgress;var seekBarBuffered=this.$.seekbarBuffered;video.onended=function(){self.fire("ended")};video.addEventListener("webkitendfullscreen",video.onended);seekBarFull.addEventListener("change",function(){var time=video.duration*(seekBarFull.value/100);video.currentTime=time});video.addEventListener("progress",function(e){var percentageBuffered=(video.buffered.end(0)-video.buffered.start(0))/video.duration*100;seekBarBuffered.style.width=percentageBuffered+"%"});video.addEventListener("timeupdate",function(){var value=(video.currentTime/video.duration*100).toFixed(2);seekBarProgress.style.width=value+"%"});NAP.webAnalytics.api.addPageVideo({videoName:this.name,videoType:this.type,videoPlayer:"html5"})}});</script></dom-module></div></body></html>